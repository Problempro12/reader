!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d1d0dd3d-c8f2-4728-b698-35a0ecad8503",e._sentryDebugIdIdentifier="sentry-dbid-d1d0dd3d-c8f2-4728-b698-35a0ecad8503")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6150],{83958:function(e,n,i){"use strict";i.d(n,{P:function(){return _}});var t=i(61794);let s=[1,0],_=()=>{let{data:e}=t.r7.useGetFoundationUserDetailedInfoQuery(),{profile:n,settings:i,account:_,library_info:r,is_user_referral:l,is_reader_partner:a,login:c,abonement:{is_active:d,valid_till:o}={is_active:!1,valid_till:""},subscription:{is_active:u}={is_active:!1},phone:{country_code:f}={},loyalty:{is_loyalty_user:m}={is_loyalty_user:void 0}}=e||{},k=!!(((null==i?void 0:i.profile_privacy)==="public"||(null==i?void 0:i.profile_privacy)==="default")&&(null==n?void 0:n.avatar_url)&&(null==n?void 0:n.avatar_url.length)>0),b=(null==i?void 0:i.profile_privacy)==="public",{phone_number:p,is_phone_confirmed:W,email:x,is_email_confirmed:h,last_name:w,first_name:g,nickname:S,avatar_url:v=""}=n||{},{marketing_consent_status:j}=null!=i?i:{marketing_consent_status:3},N=s.includes(j),{is_library_user:T,is_school_user:y}=r||{},{real:E}=_||{real:0},M=(0,t.CG)(e=>e.foundationUser.account.bonus),R=g&&w?"".concat(g," ").concat(w):g||w;return{phoneNumber:p,email:x,isPhoneNumberConfirmed:W,phoneNumberCountryCode:null!=f?f:"RU",isEmailConfirmed:h,isUserFullyVerified:p&&W&&x&&h,userNameToDisplay:b?R||S||c:S||c,avatarURL:v,isAvatarPresent:k,moneyToDisplay:E,bonus:M,isLoyaltyUser:m,isLibraryUser:T,isSchoolUser:y,isUserReferral:l,isAbonementActive:d,abonementValidTillDate:o,isSubscriptionActive:u,isReaderPartner:a,userLogin:c,isAgreedToMarketingMailing:N}}},74462:function(e,n,i){"use strict";i.d(n,{d:function(){return s}});var t=i(1178);let s=i.n(t)()(()=>Promise.all([i.e(588),i.e(6376)]).then(i.bind(i,86376)).then(e=>e.BuyPaperBooksModal),{loadableGenerated:{webpack:()=>[86376]},ssr:!1})},33110:function(e,n,i){"use strict";i.d(n,{RG:function(){return x},cl:function(){return w},l8:function(){return W},zc:function(){return h}});var t=i(31549),s=i(44194),_=i(64009),r=i(39319),l=i(51865),a=i.n(l),c=i(89798),d=i(4438),o=i(4031),u=i(74462),f=i(73758),m=i(28206),k=i(18315),b=i.n(k);let p=e=>{let{onClick:n}=e;return(0,t.jsx)(c.L,{className:b().benefitsWidget__moreDetailedButton,size:"medium",onClick:n,children:"Как воспользоваться"})},W=()=>{let{setTrue:e,value:n,setFalse:i}=(0,_.kt)(!1);return(0,t.jsxs)("div",{className:b().benefitsWidget,children:[(0,t.jsx)(o.J,{name:"chitaiGorod",path:"loyalty"}),(0,t.jsxs)("div",{className:b().benefitsWidget__description,children:[(0,t.jsx)("span",{className:b().benefitsWidget__description__text,children:"Скидка до 30% на бумажные книги"}),(0,t.jsx)("span",{children:"в \xabЧитай-городе\xbb"})]}),(0,t.jsx)(p,{onClick:e}),(0,t.jsx)(u.d,{isModalOpen:n,onClose:i})]})},x=e=>{let{isSuccess:n,onClick:i}=e;return(0,t.jsxs)("div",{className:a()(b().benefitsWidget,{[b().benefitsWidget_green]:n}),children:[(0,t.jsxs)("header",{className:b().benefitsWidget__header,children:[(0,t.jsx)(o.J,{name:"wink",path:"loyalty",className:b().benefitsWidget__winkIcon}),n&&(0,t.jsxs)("div",{className:b().benefitsWidget__successBlock,children:[(0,t.jsx)("span",{className:b().textGreen,children:"Успешно подключено"}),(0,t.jsx)(d.uQ,{name:"check",size:16})]})]}),(0,t.jsxs)("ul",{className:b().benefitsWidget__list,children:[(0,t.jsx)("li",{className:b().benefitsWidget__listItem,children:"Более 130 ТВ-каналов"}),(0,t.jsx)("li",{className:b().benefitsWidget__listItem,children:"Тысячи фильмов и сериалов на любой вкус"})]}),n?(0,t.jsx)(p,{onClick:i}):(0,t.jsx)(r.z,{className:b().benefitsWidget__buttonWink,mode:"primary",text:"Подключить Wink бесплатно",size:"small",onClick:i})]})},h=()=>(0,t.jsxs)("div",{className:b().benefitsWidget,children:[(0,t.jsxs)("p",{className:b().benefitsWidget__price,children:[(0,t.jsx)("span",{className:b().textGrayCrossOut,children:"199 ₽"}),(0,t.jsx)("span",{className:b().textOrange,children:"0 ₽ в месяц"})]}),(0,t.jsx)("p",{children:"Доступ к Wink будет сохраняться, пока активна ваша Литрес Подписка"})]}),w=()=>{let{setTrue:e,value:n,setFalse:i}=(0,_.kt)(!1);return(0,s.useEffect)(()=>{f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"view_wink_offer",params:{source_internal:"subscription_landing"}})},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{onClick:()=>{e(),f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_add",params:{source_internal:"wink_offer"}})}}),(0,t.jsx)(m._,{isModalOpen:n,onClose:i,initialStep:m.w.SUBSCRIBE_WINK})]})}},28206:function(e,n,i){"use strict";i.d(n,{_:function(){return y},w:function(){return s}});var t,s,_=i(31549),r=i(44194),l=i(9524),a=i(39319),c=i(61794),d=i(20239),o=i(62094),u=i(83958),f=i(73758),m=i(98877),k=i(18370),b=i(24817),p=i.n(b);let W=e=>{let{hideForm:n,onSetPhoneSuccess:i,subTitle:t}=e,s=(0,c.TL)();return(0,r.useEffect)(()=>{s(c.hi.global.auth.setActiveStep(k.MZ.fallbackLogin))},[]),(0,_.jsx)("div",{className:p().phoneNumberForm,children:(0,_.jsx)(m.default,{hidePopup:n,onSetPhoneSuccess:i,subTitleSetPhone:t,isReloadOnSetPhone:!1})})};var x=i(29875),h=i.n(x),w=i(4031),g=i(33110),S=i(73059),v=i.n(S);let j=e=>{let{onClick:n,isSuccessful:i}=e;return(0,_.jsxs)("div",{className:v().winkScreen,children:[(0,_.jsx)(w.J,{name:"litresSubscribe",path:"loyalty"}),(0,_.jsxs)("h3",{className:v().winkScreen__title,children:["Используйте все ",(0,_.jsx)("div",{children:"возможности подписки"})]}),(0,_.jsx)("div",{className:v().winkScreen__subtitle,children:"Ваши привилегии:"}),(0,_.jsx)(g.l8,{}),(0,_.jsx)(g.RG,{isSuccess:i,onClick:n})]})},N=()=>(0,_.jsxs)("div",{className:v().winkScreen,children:[(0,_.jsxs)("div",{className:v().winkScreen__content,children:[(0,_.jsx)("div",{className:v().winkScreen__logoWink,children:(0,_.jsx)(w.J,{name:"wink",path:"loyalty"})}),(0,_.jsxs)("ul",{className:v().winkScreen__list,children:[(0,_.jsx)("li",{className:v().winkScreen__listItem,children:"Более 130 ТВ-каналов"}),(0,_.jsx)("li",{className:v().winkScreen__listItem,children:"Тысячи фильмов и сериалов на любой вкус"})]}),(0,_.jsx)("p",{children:"Для бесплатной подписки онлайн-кинотеатра Wink, зарегистрируйтесь на Wink.ru под тем же номером телефона, который вы используете в Литрес"})]}),(0,_.jsx)(g.zc,{})]});(t=s||(s={})).PRIVILEGES="privileges",t.SUBSCRIBE_WINK="subscribeWink",t.SUBSCRIBED_WINK_SUCCESSFUL="subscribedWinkSuccessful",t.WATCH_WINK="watchWink",t.ADDED_PHONE_NUMBER="addedPhoneNumber";let T={privileges:{text:"Отлично",mode:"secondary"},subscribeWink:{text:"Подключить Wink бесплатно"},watchWink:{text:"Смотреть Wink"},subscribedWinkSuccessful:{text:"Отлично"},addedPhoneNumber:{text:""}},y=e=>{let{isModalOpen:n,onClose:i,initialStep:t,shouldReloadPageAfterSuccess:s}=e,{isMobile:m}=(0,o.kC)(),{phoneNumber:k,isPhoneNumberConfirmed:b}=(0,u.P)(),[p,x]=(0,r.useState)(t||"privileges"),w="privileges"===p,g="subscribeWink"===p,S="subscribedWinkSuccessful"===p,v="watchWink"===p,y="addedPhoneNumber"===p,[E,M]=(0,r.useState)(!k);(0,r.useEffect)(()=>{M(!k||!b)},[k,b]);let[R,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&(g&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"view_wink_offer_confirmation",params:{source_internal:"wink_offer"}}),S&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"view_wink_success",params:{source_internal:"wink_offer_confirmation"}}),v&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"view_wink_watch",params:{source_internal:"wink_success"}}))},[p]);let[C,{isLoading:B,isError:G,reset:L}]=c.Bh.useSubscribeToWinkMutation(),F=()=>{(g||v)&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_close",params:{source_internal:g?"wink_offer_confirmation":"wink_watch"}}),x(t||"privileges"),L(),i()},P=()=>{if(w&&x(E?"addedPhoneNumber":"subscribeWink"),g){if("subscribeWink"===t&&E){x("addedPhoneNumber");return}B||C().unwrap().then(()=>{if(s){I(!0),window.location.reload();return}x("subscribedWinkSuccessful")})}S&&x("watchWink"),v&&window.location.replace("https://redirect.appmetrica.yandex.com/serve/748965907946083841"),y&&(x("subscribeWink"),M(!1))},A=()=>{g&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_confirmation",params:{source_internal:"wink_offer"}}),S&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_great",params:{source_internal:"wink_success"}}),v&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_watch",params:{source_internal:"wink_watch"}})},K=T[p];return(0,_.jsx)(l.u_,{isOpen:n,onClose:F,isMobile:m,children:(0,_.jsxs)("div",{className:h().winkModal,children:[y&&E&&(0,_.jsx)(W,{hideForm:F,onSetPhoneSuccess:P,subTitle:"Чтобы подключить Wink, добавьте номер телефона"}),(w||S)&&(0,_.jsx)(j,{onClick:()=>{w&&f.TM.sendEvent(["LITRES_TRACKER"],{eventType:"click_wink_add",params:{source_internal:"wink_offer_confirmation"}}),P()},isSuccessful:S}),(g||v)&&(0,_.jsx)(N,{}),K.text&&(0,_.jsx)(a.z,{className:h().subscriptionSuccessScreen__mainButton,mode:K.mode||"primary",text:K.text,size:"medium",onClick:()=>{if(A(),S){window.location.replace("/");return}P()},disabled:R}),(g||v)&&(0,_.jsxs)("p",{className:h().winkModal__terms,children:[(0,_.jsx)("span",{children:"Нажимая на кнопку вы соглашаетесь с"})," ",(0,_.jsx)(d.I,{href:"/landing/wink-litres-promo/",children:"условиями акции"})]}),G&&(g||v)&&(0,_.jsx)("p",{className:h().winkModal__error,children:"Что-то пошло не так. Попробуйте еще раз."})]})})}},24817:function(e){e.exports={phoneNumberForm:"PhoneNumberForm-module__cfA9JG__phoneNumberForm",phoneNumberFormModal:"PhoneNumberForm-module__cfA9JG__phoneNumberFormModal"}},18315:function(e){e.exports={benefitsWidget__list:"BenefitsWidget-module__9LMGxa__benefitsWidget__list",benefitsWidget__description__text:"BenefitsWidget-module__9LMGxa__benefitsWidget__description__text",benefitsWidget__listItem:"BenefitsWidget-module__9LMGxa__benefitsWidget__listItem",benefitsWidget__header:"BenefitsWidget-module__9LMGxa__benefitsWidget__header",benefitsWidget__moreDetailedButton:"BenefitsWidget-module__9LMGxa__benefitsWidget__moreDetailedButton",textGrayCrossOut:"BenefitsWidget-module__9LMGxa__textGrayCrossOut",benefitsWidget__successBlock:"BenefitsWidget-module__9LMGxa__benefitsWidget__successBlock",benefitsWidget:"BenefitsWidget-module__9LMGxa__benefitsWidget",benefitsWidget__price:"BenefitsWidget-module__9LMGxa__benefitsWidget__price",textOrange:"BenefitsWidget-module__9LMGxa__textOrange",benefitsWidget_green:"BenefitsWidget-module__9LMGxa__benefitsWidget_green",benefitsWidget__description:"BenefitsWidget-module__9LMGxa__benefitsWidget__description",benefitsWidget__winkIcon:"BenefitsWidget-module__9LMGxa__benefitsWidget__winkIcon",benefitsWidget__buttonWink:"BenefitsWidget-module__9LMGxa__benefitsWidget__buttonWink",textGreen:"BenefitsWidget-module__9LMGxa__textGreen"}},29875:function(e){e.exports={winkModal__error:"WinkModal-module__3Te6FW__winkModal__error",winkModal__terms:"WinkModal-module__3Te6FW__winkModal__terms",winkModal:"WinkModal-module__3Te6FW__winkModal"}},73059:function(e){e.exports={winkScreen__subtitle:"WinkScreens-module__0QFfta__winkScreen__subtitle",winkScreen:"WinkScreens-module__0QFfta__winkScreen",winkScreen__logoWink:"WinkScreens-module__0QFfta__winkScreen__logoWink",winkScreen__title:"WinkScreens-module__0QFfta__winkScreen__title",winkScreen__content:"WinkScreens-module__0QFfta__winkScreen__content",winkScreen__list:"WinkScreens-module__0QFfta__winkScreen__list",winkScreen__listItem:"WinkScreens-module__0QFfta__winkScreen__listItem"}}}]);
//# sourceMappingURL=6150-8226e189329e2b3f.js.map