!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="509781a4-3066-452c-adbe-80c96b1fcaf8",e._sentryDebugIdIdentifier="sentry-dbid-509781a4-3066-452c-adbe-80c96b1fcaf8")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1814],{23950:function(e,t,r){"use strict";r.d(t,{Io:function(){return d},Oo:function(){return _}});var o=r(31549);r(44194);var n=r(48592),s=r(51865),l=r.n(s),i=r(4438),a=r(20239),c=r(57683),u=r.n(c);let _=e=>{let{additionalSlice:t=!1,breadcrumbs:r,className:s,emptyLastItem:c=!1}=e,{t:_}=(0,n.$G)(),d=r.filter(e=>!e.skip).slice(c||t?-3:-2)[0]||r[0],m=e=>1===r.length||r.length>1&&(e!==r.length-1||c);return(0,o.jsx)("nav",{id:"breadcrumbs","aria-label":_("Хлебные крошки"),children:(0,o.jsx)("ul",{className:l()(u().breadcrumbs,s),itemScope:!0,itemType:"https://schema.org/BreadcrumbList","data-testid":"breadcrumbs__wrapper",children:r.map((e,t)=>(0,o.jsxs)("li",{itemScope:!0,itemType:"https://schema.org/ListItem",itemProp:"itemListElement",className:l()(u().breadcrumbs__item,{[u().breadcrumbs__item_mobileHidden]:d.url!==e.url,[u().breadcrumbs__item_last]:d.url===e.url}),children:[e.url&&m(t)?(0,o.jsxs)(a.I,{href:e.url,itemProp:"item",children:[d.url===e.url&&(0,o.jsx)(i.uQ,{name:"crumbArrow",className:u().breadcrumbs__icon,height:10,width:6}),e.prefix||null,(0,o.jsx)("span",{itemProp:"name",children:e.name})]}):(0,o.jsxs)(o.Fragment,{children:[e.prefix||null,(0,o.jsx)("span",{itemProp:"name",children:e.name})]}),(0,o.jsx)("meta",{itemProp:"position",content:"".concat(t+1)})]},e.name))})})},d=e=>(t,r)=>[{name:e("Книги"),url:"/"},{name:t,url:r}];t.ZP=_},77485:function(e,t,r){"use strict";r.d(t,{g:function(){return p}});var o=r(31549),n=r(44194),s=r(20239),l=r(59838),i=r(61794),a=r(51865),c=r.n(a),u=r(47902),_=r(15381),d=r(1178);let m=r.n(d)()(()=>Promise.resolve().then(r.bind(r,44575)).then(e=>e.AddNewPhonePopup),{loadableGenerated:{webpack:()=>[44575]},ssr:!1});var b=r(29819),f=r.n(b);let p=e=>{let{canEarnBonusesAmount:t,isDarkBackground:r=!1}=e,a=(0,i.CG)(e=>e.browser.clientHost),d=(0,i.CG)(e=>e.foundationUser),b=(0,_.t)(),p=(0,i.TL)(),[v,y]=(0,n.useState)(!1),[x,k]=(0,n.useState)(!1),j=()=>{(0,l.kT)("isProcessEnterLoyaltyActive"),(0,l.kT)("block_global_modals"),k(!1)},g=()=>{if((0,l.ej)("isProcessEnterLoyaltyActive")){if(!b){p(i.hi.global.interfaceRequests.setLoginPopupError({isOpen:!0,errorText:"Чтобы участвовать в бонусной программе, нужно войти",onClosePopup:j}));return}if(!d.profile.is_phone_confirmed){x||(h(),k(!0));return}d.loyalty.is_loyalty_user&&j()}};return((0,n.useEffect)(()=>{g()},[b,d.profile.is_phone_confirmed,d.loyalty.is_loyalty_user]),(0,n.useEffect)(()=>{x&&(y(!0),k(!1))},[x]),d.loyalty.is_loyalty_user||!(0,l.tS)(a))?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:c()(f().loyaltyInvitationBlock,{[f().loyaltyInvitationBlock_dark]:r}),children:[(!!t&&t>0||d.loyalty.need_show_welcome_bonuses)&&(0,o.jsx)(u.j,{bonus:t,className:f().loyaltyInvitationBlock__bonuses,needShowWelcomeBonuses:d.loyalty.need_show_welcome_bonuses}),(0,o.jsx)("p",{className:f().loyaltyInvitationBlock__text,children:"Покупайте книги и получайте бонусы в Литрес, Читай-городе и Буквоеде."}),(0,o.jsx)(s.I,{onClick:()=>{h(),g()},children:"Участвовать в бонусной программе"})]}),v&&(0,o.jsx)(m,{title:"Новый номер телефона",subTitle:"Чтобы использовать бонусы, добавьте номер телефона",onClose:()=>{y(!1),j()},onSuccess:()=>{y(!1),j(),window.location.reload()}})]})};function h(){(0,l.d8)("isProcessEnterLoyaltyActive","true",{expires:120}),(0,l.d8)("block_global_modals","true",{expires:120})}},47902:function(e,t,r){"use strict";r.d(t,{j:function(){return h},U:function(){return v}});var o=r(31549);r(44194);var n=r(51865),s=r.n(n),l=r(4438),i=r(59838),a=r(76791),c=r(61794),u=r(26249),_=r(34257),d=r(81552),m=r.n(d);let b=e=>{let{text:t,children:r}=e;return(0,o.jsx)(_.J,{content:(0,o.jsx)("p",{className:m().tooltip__text,children:t}),contentClassName:m().tooltip,trigger:["hover"],customCloseTriggers:["esc","focusLost"],baseClassName:m().tooltip__inner,placement:"top",offset:[10,12],timer:2e4,disableArrow:!0,children:(0,o.jsx)("div",{className:m().tooltip__content,children:r})})};var f=r(97271),p=r.n(f);let h=e=>{let{bonus:t,className:r,needShowWelcomeBonuses:n=!1}=e,i=(0,c.CG)(e=>e.foundationUser),_=(0,u.useRouter)(),d=(0,a.gn)(i.varioqubTests.flags,"welcome_bonuses","true")||"welcome_bonuses"===_.query.test,m=n&&d;return t||m?(0,o.jsx)(b,{text:"Начисляем бонусы за каждую покупку книги в Литрес, Читай-городе и Буквоеде. Оплачивайте бонусами до 99% от суммы чека, 1 бонус = 1 рубль.",children:(0,o.jsxs)("span",{className:s()(p().bonusAccrual,r),children:[!m&&(0,o.jsx)("p",{children:"Начислим"}),!m&&(0,o.jsxs)("p",{className:p().bonusAccrual__bonus,children:["+",t]}),(0,o.jsx)(l.uQ,{name:"bonusHeart",size:16}),m&&(0,o.jsx)("span",{children:"+50 бонусов новым участникам"})]})}):null},v=e=>{let{bonus:t}=e;return t?(0,o.jsx)(b,{text:"Начисляем бонусы за каждую покупку книги в Литрес, Читай-городе и Буквоеде. Оплачивайте бонусами до 99% от суммы чека, 1 бонус = 1 рубль.",children:(0,o.jsxs)("span",{className:s()(p().bonusAccrual,p().newBonusAccrual),children:[(0,o.jsx)(l.uQ,{name:"bonusHeart",size:16}),(0,o.jsxs)("p",{className:p().bonusAccrual__bonus,children:["+",t]}),(0,o.jsxs)("p",{children:[" ",(0,i.pd)(t,["бонус за покупку","бонуса за покупку","бонусов за покупку"])]})]})}):null}},8976:function(e,t,r){"use strict";r.d(t,{g:function(){return j}});var o=r(31549),n=r(44194),s=r(51865),l=r.n(s),i=r(48592),a=r(39319),c=r(61794),u=r(48747),_=r(52805),d=r(51208),m=r.n(d);let b=e=>{let{className:t}=e,r=(0,c.CG)(e=>e.foundationUser),s=(0,u.A)(),i=(0,_.u3)((null==s?void 0:s.detail).end_date),[a,d]=(0,n.useState)({hours:"00",minutes:"00",seconds:"00"});return((0,n.useEffect)(()=>{let e=null;if((null==s?void 0:s.status)==="ACTIVE"){let t=new Date(i).getTime();if(isNaN(t))return;e=setInterval(()=>{if(t<=new Date().getTime()){d({hours:"00",minutes:"00",seconds:"00"}),clearInterval(e);return}d({...(0,_.gv)(t)})},1e3)}return()=>{e&&clearInterval(e)}},[i]),!s||"ACTIVE"!==s.status||r.abonement.is_active||r.subscription.is_active)?null:(0,o.jsxs)("div",{className:l()(m().countdown,t),children:[a.hours,":",a.minutes,":",a.seconds]})},f=e=>{let{className:t}=e,{t:r}=(0,i.$G)();return(0,o.jsx)("h4",{className:l()(m().title,t),children:r("Четвёртая книга в подарок")})};var p=r(58655);let h=e=>{let{className:t}=e;return(0,o.jsx)("div",{className:l()(m().book,m().bookImage,t)})},v=e=>{let{isBookCard:t}=e,r=(0,c.CG)(e=>e.foundationUser),s=(0,u.A)();if(!s||r.abonement.is_active||r.subscription.is_active)return null;let i=e=>{if(e){var r;let o=t?32:45,n=t?44:62,s=null!==(r=e.cover_ratio)&&void 0!==r?r:o/n;return{width:"".concat(Math.max(s*n,o),"px")}}return{}};return(0,o.jsxs)("div",{className:l()(m().books,t&&m().books__card),children:[Array.from({length:3}).map((e,t)=>{var r,a,c,u;return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)("div",{className:l()(m().book,{[m().book_empty]:!(null===(r=s.detail.arts)||void 0===r?void 0:r[t])}),style:i(null===(a=s.detail.arts)||void 0===a?void 0:a[t]),children:(null===(c=s.detail.arts)||void 0===c?void 0:c[t])&&(0,o.jsx)(p.uq,{artId:s.detail.arts[t].id,alt:s.detail.arts[t].title,loading:"lazy",decoding:"async",coverSizes:{byHeight:!0,desktopNormal:70,desktopHighDensity:120,mobileNormal:70,mobileHighDensity:120},unloaderSize:20})}),(0,o.jsx)("div",{className:m().divider,children:2===t?"=":"+"})]},(null===(u=s.detail.arts)||void 0===u?void 0:u[t])?s.detail.arts[t].id:"bannerBook-".concat(t))}),(0,o.jsx)(h,{})]})},y=e=>{let{className:t}=e;return(0,o.jsxs)("div",{className:l()(m().books,t),children:[Array.from({length:3}).map((e,t)=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)("div",{className:l()(m().book,m().book_empty)}),(0,o.jsx)("div",{className:m().divider,children:2===t?"=":"+"})]},"bannerBook-".concat(t))),(0,o.jsx)(h,{})]})},x=e=>{let{className:t}=e,r=(0,c.CG)(e=>e.foundationUser),{t:n}=(0,i.$G)(),s=(0,u.A)();return!s||r.abonement.is_active||r.subscription.is_active?null:"ACTIVE"===s.status?(0,o.jsx)("span",{className:l()(m().description,t),children:n("Успейте выбрать подарок.")}):(0,o.jsxs)("span",{className:l()(m().description,t),children:[!s.detail.arts.length&&n("Купите три книги и получите ещё одну в подарок."),1===s.detail.arts.length&&n("Осталось добавить ещё две книги."),2===s.detail.arts.length&&n("Осталось добавить ещё одну книгу."),s.detail.arts&&s.detail.arts.length>=3&&n("После покупки вы сможете выбрать в подарок книгу до {amount}.",{amount:s.offerPrice.toStringWithCurrency()})]})};var k=r(32475);let j=e=>{let{onTermsClick:t,className:r,isDisplayEmptyBooks:n}=e,s=(0,c.CG)(e=>e.foundationUser),{t:_}=(0,i.$G)(),d=(0,u.A)();return!d||s.abonement.is_active||s.subscription.is_active?null:(0,o.jsxs)("div",{className:l()(m().container,r),children:[(0,o.jsx)(f,{}),"ACTIVE"===d.status?(0,o.jsxs)("div",{className:m().countdownWrapper,children:[(0,o.jsx)("div",{className:m().countdownWrapper__left,children:(0,o.jsx)(h,{})}),(0,o.jsxs)("div",{className:m().countdownWrapper__right,children:[(0,o.jsxs)("div",{className:m().info,children:[(0,o.jsx)(x,{}),(0,o.jsx)(k.M,{onTermsClick:t})]}),(0,o.jsx)(b,{}),(0,o.jsx)(a.z,{mode:"primary",size:"small",text:_("Выбрать подарок"),className:m().countdownWrapper__button,href:"/"})]})]}):(0,o.jsxs)(o.Fragment,{children:[n?(0,o.jsx)(y,{}):(0,o.jsx)(v,{}),(0,o.jsxs)("div",{className:m().info,children:[!n&&(0,o.jsx)(x,{}),(0,o.jsx)(k.M,{onTermsClick:t})]})]})]})};j.Title=f,j.Books=v,j.BooksEmpty=y,j.Description=x,j.BookGift=h,j.Terms=k.M,j.Countdown=b},32475:function(e,t,r){"use strict";r.d(t,{M:function(){return d},e:function(){return m}});var o=r(31549);r(44194);var n=r(51865),s=r.n(n),l=r(48592),i=r(61794),a=r(55714),c=r(59838),u=r(51208),_=r.n(u);let d=e=>{let{onTermsClick:t,className:r}=e,{t:n}=(0,l.$G)();return(0,o.jsx)(a.Fg,{href:m(),className:s()(_().link,r),onClick:t,children:n("Условия акции")})};function m(){let e=(0,i.CG)(e=>e.browser.clientHost),t=new Map([["5636",c.Ok],["13804",c.Ov],["13954",c.p6],["13949",c.qT],["13974",c.LS],["13979",c.Gm],["13964",c.HF],["13959",c.MB],["13969",c.Yt]]);for(let r of t.keys()){let o=t.get(r);if("function"==typeof o&&o(e))return"https://".concat(e,"/pages/cms/?page=").concat(r)}}},48747:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});var o=r(61794),n=r(44194),s=r(59838),l=r(81014);class i{get offerPrice(){if("offer_price"in this.detail&&this.detail.offer_price)return new l.W(this.detail.offer_price.amount,this.detail.offer_price.currency);if(this.detail.arts){let e=this.detail.arts.map(e=>{var t,r;return{price:(null===(t=e.prices)||void 0===t?void 0:t.full_price)||0,currency:(null===(r=e.prices)||void 0===r?void 0:r.currency)||"RUB"}}).sort((e,t)=>{let{price:r}=e,{price:o}=t;return r-o})[0];return new l.W(e.price,e.currency)}return new l.W(0,"RUB")}constructor(e){this.status=e.offer_status,this.detail=e.offer_detail}}let a=()=>{let{data:e,isLoading:t,isError:r}=o.Ce.useGetFourArtOfferQuery();if((0,n.useEffect)(()=>{r&&(0,s.RY)("getFourArtOffer error",{logLevel:"error"})},[r]),e&&!t&&!r)return new i(e)}},57683:function(e){e.exports={breadcrumbs__item_last:"Breadcrumbs-module__UmkqKG__breadcrumbs__item_last",breadcrumbs:"Breadcrumbs-module__UmkqKG__breadcrumbs",breadcrumbs__item_mobileHidden:"Breadcrumbs-module__UmkqKG__breadcrumbs__item_mobileHidden",breadcrumbs__item:"Breadcrumbs-module__UmkqKG__breadcrumbs__item",breadcrumbs__icon:"Breadcrumbs-module__UmkqKG__breadcrumbs__icon"}},29819:function(e){e.exports={loyaltyInvitationBlock__bonuses:"LoyaltyInvitationBlock-module__awVKRq__loyaltyInvitationBlock__bonuses",loyaltyInvitationBlock_dark:"LoyaltyInvitationBlock-module__awVKRq__loyaltyInvitationBlock_dark",loyaltyInvitationBlock__text:"LoyaltyInvitationBlock-module__awVKRq__loyaltyInvitationBlock__text",loyaltyInvitationBlock:"LoyaltyInvitationBlock-module__awVKRq__loyaltyInvitationBlock"}},97271:function(e){e.exports={bonusAccrual:"BonusAccrual-module__NxHJlW__bonusAccrual",newBonusAccrual:"BonusAccrual-module__NxHJlW__newBonusAccrual",bonusAccrual__bonus:"BonusAccrual-module__NxHJlW__bonusAccrual__bonus"}},81552:function(e){e.exports={tooltip__inner:"Tooltip-module__CbON5a__tooltip__inner",tooltip__text:"Tooltip-module__CbON5a__tooltip__text",tooltip__content:"Tooltip-module__CbON5a__tooltip__content",tooltip:"Tooltip-module__CbON5a__tooltip"}},51208:function(e){e.exports={book:"FourthArtsOffer-module__Yb0qSq__book",divider:"FourthArtsOffer-module__Yb0qSq__divider",bookImage:"FourthArtsOffer-module__Yb0qSq__bookImage",info:"FourthArtsOffer-module__Yb0qSq__info",title:"FourthArtsOffer-module__Yb0qSq__title",books__card:"FourthArtsOffer-module__Yb0qSq__books__card",countdownWrapper:"FourthArtsOffer-module__Yb0qSq__countdownWrapper",description:"FourthArtsOffer-module__Yb0qSq__description",books:"FourthArtsOffer-module__Yb0qSq__books",countdownWrapper__button:"FourthArtsOffer-module__Yb0qSq__countdownWrapper__button",countdownWrapper__left:"FourthArtsOffer-module__Yb0qSq__countdownWrapper__left",container:"FourthArtsOffer-module__Yb0qSq__container",book_empty:"FourthArtsOffer-module__Yb0qSq__book_empty",countdownWrapper__right:"FourthArtsOffer-module__Yb0qSq__countdownWrapper__right",link:"FourthArtsOffer-module__Yb0qSq__link",countdown:"FourthArtsOffer-module__Yb0qSq__countdown"}}}]);
//# sourceMappingURL=1814-056ab96f370c10c8.js.map