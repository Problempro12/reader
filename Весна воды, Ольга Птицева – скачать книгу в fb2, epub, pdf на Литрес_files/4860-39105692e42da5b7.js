!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="614ccb6e-c0ca-46e4-9f12-4c176ef8e189",t._sentryDebugIdIdentifier="sentry-dbid-614ccb6e-c0ca-46e4-9f12-4c176ef8e189")}catch(t){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4860],{34390:function(t,e,i){i.d(e,{S:function(){return u}});var s=i(76838),r=i.n(s),n=i(21092),a=i(33669),c=i(92479);class u{getBestPriceSubscriptionClass(){if(!this.items.length)return null;let t=this.items.find(t=>t.prices.isBestPrice);return t||(t=r()(this.items,t=>t.prices.averageMonthPrice)),t||null}static createSubscriptionClasses(t){return t.map(t=>new c.i(t))}static createSubscriptionClassesSortedByDuration(t){let e=[...t];return e.sort((t,e)=>t.duration.value-e.duration.value),e}static separateSubscriptionsClasses(t){return t.filter(t=>n.jk.checkIfOptimal(t.plan))}checkIfSomeSubscriptionClassHasCoupon(){return this.items.some(t=>null!==t.appliedCoupon)}checkIfBlackFriday(){return!!this.items.find(t=>{var e;return(null===(e=t.promoEvent)||void 0===e?void 0:e.name)===c.r.blackFriday})}getOneMonthClass(){return this.items.find(t=>t.duration.checkIfOne())||null}constructor(t){let e=u.separateSubscriptionsClasses(t),i=u.createSubscriptionClasses(e);this.items=u.createSubscriptionClassesSortedByDuration(i),this.tariffs=new a.Y(t),this.bestPriceSubscriptionClass=this.getBestPriceSubscriptionClass(),this.checkIfBlackFriday=this.checkIfBlackFriday.bind(this)}}},4974:function(t,e,i){i.d(e,{Y:function(){return l}});var s=i(44194),r=i(26249),n=i.n(r),a=i(61794),c=i(48592),u=i(58117),o=i(68969);let f="go-to-subscription-payment",l=(0,s.forwardRef)(function(t,e){let{t:i}=(0,c.$G)(),u=(0,a.TL)(),l=(0,a.CG)(t=>t.foundationUser),p=(0,r.useRouter)(),d=(0,s.useCallback)(()=>{if(!t.selectedSubscriptionClass)return{canPay:!1};let e=function(t){let{selectedSubscriptionClass:e,cameFromSource:i,cameFromSourcePayload:s,afterPaymentRedirectParams:r,isShowingSubscriptionPlans:n,routerQuery:a}=t,c={class:e.classId.toString()};return n&&(c["show-new-subscription-plans"]="true"),(0,o.h)({cameFromSource:i,cameFromSourcePayload:s,afterPaymentRedirectParams:r,paymentOperation:"subscription",routerQuery:a,specificPaymentOperationUrlParams:{...c}})}({...t,routerQuery:p.query});return n().push(e),{canPay:!0}},[t,p.query]);return(0,s.useImperativeHandle)(e,()=>({goToPaymentOperation(){if(0===l.id)return u(a.hi.global.interfaceRequests.setLoginPopupError({isOpen:!0,errorText:i("Авторизуйтесь для покупки подписки"),urlParams:{[f]:"1","block-phone-asking":"1"}})),{isGoingToNewPaymentFrame:!1,canGoToPayment:Promise.resolve(!1)};let{canPay:t}=d();return{isGoingToNewPaymentFrame:t,canGoToPayment:Promise.resolve(t)}}}),[u,l.id,d]),h(d),null}),h=t=>{let e=(0,r.useRouter)(),i=(0,a.CG)(t=>t.foundationUser);(0,s.useEffect)(()=>{new URL(window.location.href).searchParams.has(f)&&(0===i.id||i.subscription.is_active||t(),(0,u.Ow)(e,[f]))},[i,e,t])}},80094:function(t,e,i){i.d(e,{H:function(){return r}});var s=i(21092);class r{static create(t){return s.jk.checkIfOptimal(t.plan)?new s.jk(t):s.T1.checkIfBase(t.plan)?new s.T1(t):s.mS.checkIfMaximum(t.plan)?new s.mS(t):s.KF.checkIfEasyReading(t.plan)?new s.KF(t):s._P.checkIfBookshelf(t.plan)?new s._P(t):null}}},33669:function(t,e,i){i.d(e,{Y:function(){return h}});var s=i(21092),r=i(76838),n=i.n(r),a=i(92479),c=i(72695);class u{shouldShowSubscriptionTariffs(){return!(this.checkIfAppliedCoupon()||this.checkIfBlackFriday())}filterByDuration(t){return this.items.filter(e=>e.duration.value===t)}sortAndFilterSubscriptionTariffs(t){return this.getSortedSubscriptionTariffs(t).filter(t=>{let e=t.duration.value;return e===c.nH.MONTH||e===c.nH.YEAR})}excludePlansByIds(t){this.items=this.items.filter(e=>t.includes(e.planId)),this.reinitialize()}findSubscriptionTariffByClassId(t){return this.items.find(e=>e.classId===parseInt(t,10))||null}reinitialize(){this.bestPriceSubscriptionTariff=this.getBestPriceSubscriptionTariff()}getBestPriceSubscriptionTariff(){let t=this.items.find(t=>t.prices.isBestPrice);return t||(t=n()(this.items,t=>t.prices.averageMonthPrice)),t||null}checkIfBlackFriday(){return!!this.items.find(t=>{var e;return(null===(e=t.promoEvent)||void 0===e?void 0:e.name)===a.r.blackFriday})}checkIfAppliedCoupon(){return this.items.some(t=>null!==t.appliedCoupon)}constructor(t){this.items=this.sortAndFilterSubscriptionTariffs(t),this.bestPriceSubscriptionTariff=this.getBestPriceSubscriptionTariff()}}class o extends u{getSortedSubscriptionTariffs(t){let[e,i,r]=[[],[],[]];for(let n of t)n instanceof s.jk&&i.push(n),n instanceof s.T1&&e.push(n),n instanceof s.mS&&r.push(n);return e.concat(i,r)}}class f extends u{getSortedSubscriptionTariffs(t){let[e,i,r]=[[],[],[]];for(let n of t)n instanceof s.jk&&i.push(n),n instanceof s.KF&&e.push(n),n instanceof s._P&&r.push(n);return e.concat(i,r)}}var l=i(80094);class h{setSpecificTariffGroupStrategy(t){if(t.isSpectrum){this.tariffs=new o(this.availableTariffs);return}t.isBookshelf&&(this.tariffs=new f(this.availableTariffs))}excludePlansByIds(t){if(this.tariffs){this.tariffs.excludePlansByIds(t);return}}findSubscriptionTariffByClassId(t){return this.tariffs?this.tariffs.findSubscriptionTariffByClassId(t):null}get bestPriceSubscriptionTariff(){return this.tariffs?this.tariffs.bestPriceSubscriptionTariff:null}shouldShowSubscriptionTariffs(){return!!this.tariffs&&this.tariffs.shouldShowSubscriptionTariffs()}toDisplay(t){return this.tariffs?this.tariffs.filterByDuration(t):[]}static checkIfSubscriptionTariffIsNotOptimal(t){return!!(t&&!s.jk.checkIfOptimal(t))}static checkIfDurationIsValid(t){return t===c.nH.MONTH||t===c.nH.YEAR}createSubscriptionTariffs(t){let e=[];for(let i of t){let t=l.H.create(i);t&&e.push(t)}return e}constructor(t){this.tariffs=null,this.availableTariffs=this.createSubscriptionTariffs(t)}}},72695:function(t,e,i){var s,r;i.d(e,{AR:function(){return a},jQ:function(){return c},nH:function(){return s}}),(r=s||(s={}))[r.MONTH=1]="MONTH",r[r.YEAR=12]="YEAR";class n{constructor(t){this.label=t.label,this.name=t.name,this.duration=t.duration,this.hasDiscount=t.hasDiscount}}class a extends n{constructor(){super({label:"Оплата раз в месяц",name:"monthly",duration:1,hasDiscount:!1})}}class c extends n{constructor(){super({label:"Оплата раз в год",name:"yearly",duration:12,hasDiscount:!0})}}},2327:function(t,e,i){i.d(e,{K:function(){return h}});var s=i(85813),r=i(83210),n=i(90121),a=i(59389),c=i(88199),u=i(62635),o=i(25496),f=i(29738),l=i(90769);function h(t){switch(t){case"az-AZ":return s.az;case"de-DE":return r.de;case"en-US":return n._;case"es-ES":return a.es;case"et-EE":return c.et;case"pl-PL":return u.pl;case"uz-UZ":return o.uz;case"tr-TR":return f.tr;default:return l.ru}}}}]);
//# sourceMappingURL=4860-39105692e42da5b7.js.map